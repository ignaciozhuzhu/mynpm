var net = require('net');

var server = net.createServer();

server.on("listening", function () { server.close(); });
server.listen('32323', '127.0.0.1');

var net = require('net');

var server = net.createServer(function(socket) {
    socket.on('data', console.log);
    server.close();
});

server.listen(32323);

var socket = net.createConnection(32323);
// call end to make sure the socket closes
socket.end('hi');
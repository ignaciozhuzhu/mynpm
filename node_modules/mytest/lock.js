var ReadWriteLock = require('ReadWriteLock');
var rwlock = new ReadWriteLock();
 
rwlock.readLock([
    function(cb){
        console.log('Start read 1!');
        setTimeout(function(){
            console.log('The reading procedure 1 is finished!');
            cb();
        },20);
    },
    function(cb){
        console.log('Start read 2!');
        setTimeout(function(){
            console.log('The reading procedure 2 is finished!');
            cb();
        },10);
    }
]);
 
 
rwlock.writeLock(function(cb){
    console.log('Start write 1!');
    setTimeout(function(){
        console.log('The writing procedure 1 is finished!');
        cb();
    },10);
});
 
rwlock.readLock(function(cb){
    console.log('Start read 3!');
    setTimeout(function(){
        console.log('The reading procedure 3 is finished!');
        cb();
    },10);
});